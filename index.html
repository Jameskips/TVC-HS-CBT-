<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>TVC High School — CBT</title>
<style>
  :root{--primary:#0d6efd;--danger:#dc3545;--card:#fff;--bg:#f4f6fb}
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);margin:0;padding:18px}
  header{background:var(--primary);color:#fff;padding:14px;border-radius:8px;text-align:center;margin-bottom:18px}
  .app{max-width:1000px;margin:0 auto}
  .card{background:var(--card);padding:14px;border-radius:8px;box-shadow:0 6px 18px rgba(13,18,30,0.06);margin-bottom:14px}
  .row{display:flex;gap:10px;align-items:center}
  input,select,textarea,button{font-size:14px}
  input,select,textarea{padding:8px;border:1px solid #d6d9e6;border-radius:6px;width:100%}
  button{padding:8px 12px;border-radius:6px;border:0;background:var(--primary);color:#fff;cursor:pointer}
  button.danger{background:var(--danger)}
  .hidden{display:none}
  table{width:100%;border-collapse:collapse;margin-top:10px}
  th,td{padding:8px;border:1px solid #eef2f6;text-align:left}
  th{background:#f1f5ff}
  .small{font-size:13px;padding:6px 8px}
  .controls{display:flex;gap:8px;flex-wrap:wrap}
  .muted{color:#666;font-size:13px}
  .action-btn{padding:6px 8px;border-radius:6px;border:0;background:#e9ecef;color:#111;cursor:pointer}
  .action-btn:hover{opacity:0.9}
  @media (max-width:720px){ .row{flex-direction:column} }
</style>
</head>
<body>
<header><h1>The Valued Child (TVC) High School — CBT</h1></header>
<div class="app">

  <!-- LOGIN -->
  <div id="loginCard" class="card">
    <h2>Login</h2>
    <div class="row">
      <input id="loginUser" placeholder="Username (type 'admin' for Admin)" />
      <input id="loginPass" placeholder="Password" type="password" />
      <button id="btnLogin">Login</button>
    </div>
    <p id="loginMsg" class="muted"></p>
  </div>

  <!-- ADMIN DASHBOARD -->
  <div id="adminCard" class="card hidden">
    <div class="row" style="justify-content:space-between">
      <h2>Admin Dashboard</h2>
      <div class="controls">
        <button id="btnLogoutAdmin">Logout</button>
        <button id="btnRefresh">Refresh from Bin</button>
      </div>
    </div>

    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px">
      <!-- Subjects -->
      <div class="card" style="margin:0">
        <h3>Subjects</h3>
        <div class="row">
          <input id="subjectInput" placeholder="New subject name" />
          <button id="btnAddSubject">Add</button>
        </div>
        <ul id="subjectList"></ul>
      </div>

      <!-- Students -->
      <div class="card" style="margin:0">
        <h3>Students</h3>
        <form id="studentForm" onsubmit="return false">
          <input id="stuId" placeholder="Student ID (unique)" />
          <input id="stuName" placeholder="Full name" />
          <input id="stuPass" placeholder="Password" />
          <div class="row">
            <button id="btnAddStudent">Add Student</button>
            <button id="btnExportStudents">Export CSV</button>
          </div>
        </form>
        <table>
          <thead><tr><th>ID</th><th>Name</th><th>Pass</th><th>Actions</th></tr></thead>
          <tbody id="studentsTbody"></tbody>
        </table>
      </div>
    </div>

    <div style="display:grid;grid-template-columns:1fr;gap:12px;margin-top:12px">
      <!-- Questions manager -->
      <div class="card" style="margin:0">
        <h3>Questions</h3>
        <div class="row">
          <select id="qSubjectSelect"></select>
          <button id="btnReloadQuestions">Load</button>
        </div>
        <textarea id="qText" placeholder="Question text"></textarea>
        <div class="row">
          <input id="optA" placeholder="Option A" />
          <input id="optB" placeholder="Option B" />
        </div>
        <div class="row">
          <input id="optC" placeholder="Option C" />
          <input id="optD" placeholder="Option D" />
        </div>
        <div class="row">
          <select id="qCorrect">
            <option value="A">A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option>
          </select>
          <button id="btnAddQuestion">Add Question</button>
        </div>

        <h4 style="margin-top:12px">Existing Questions for selected subject</h4>
        <table>
          <thead><tr><th>#</th><th>Question</th><th>Answer</th><th>Actions</th></tr></thead>
          <tbody id="questionsTbody"></tbody>
        </table>
      </div>

      <!-- Scores -->
      <div class="card" style="margin:0">
        <h3>Results (Admin only)</h3>
        <div class="row">
          <input id="filterStudent" placeholder="Filter by student name/ID" />
          <input id="filterSubject" placeholder="Filter by subject" />
          <button id="btnApplyFilter">Apply</button>
          <button id="btnClearFilter">Clear</button>
          <button id="btnExportResults">Export CSV</button>
        </div>
        <table>
          <thead><tr><th>Student ID</th><th>Student Name</th><th>Subject</th><th>Score</th><th>Date</th><th>Actions</th></tr></thead>
          <tbody id="resultsTbody"></tbody>
        </table>
      </div>
    </div>

  </div>

  <!-- STUDENT DASHBOARD -->
  <div id="studentCard" class="card hidden">
    <div class="row" style="justify-content:space-between">
      <h2>Student Panel — <span id="studentWelcome"></span></h2>
      <div class="controls">
        <button id="btnLogoutStudent">Logout</button>
      </div>
    </div>

    <div class="card" style="margin-top:12px">
      <h3>Available Subjects</h3>
      <select id="studentSubjectSelect"></select>
      <div class="row">
        <input id="attemptsNotice" class="muted" readonly disabled />
        <button id="btnStartExam">Start Exam</button>
      </div>
    </div>

    <div id="examCard" class="card hidden">
      <h3 id="examTitle">Exam</h3>
      <div class="row">
        <div class="muted">Time left:</div><div id="examTimer" class="muted timerValue"></div>
      </div>
      <form id="examForm"></form>
      <div class="row">
        <button id="btnSubmitExam">Submit</button>
        <button id="btnCancelExam" class="action-btn">Cancel</button>
      </div>
    </div>
  </div>

  <!-- status -->
  <div id="status" class="muted" style="margin-top:12px"></div>
</div>

<script>
/* ============================
   CONFIG — REPLACE THESE
   ============================ */
// JSONBin: replace these with your values
const BIN_ID = "68b36d5743b1c97be9315a46";
const API_KEY = "$2a$10$fWok9ba27BiXeCpOUIUYaOKx8SDCAhODlzlPkZ.6pyu3xjClAGuhy";
const BIN_URL = `https://api.jsonbin.io/v3/b/${BIN_ID}`;

/* ============================
   DEFAULT LOCAL DATA (fallback)
   ============================ */
let state = {
  adminPassword: "admin123",
  subjects: ["Mathematics"],
  students: [ {id:"john01", name:"John Doe", password:"pass123"} ],
  questions: { "Mathematics": [
      { q:"2 + 2 = ?", options:{A:"3",B:"4",C:"5",D:"6"}, answer:"B" },
      { q:"5 × 3 = ?", options:{A:"8",B:"15",C:"10",D:"20"}, answer:"B" }
    ]
  },
  results: [] // { studentId, studentName, subject, score, total, date }
};

/* ============================
   App variables
   ============================ */
let currentUser = null;
let exam = { subject:null, questions:[], duration: 30*60, timer: null, timeLeft:0 }; // default 30 minutes

/* ============================
   DOM refs
   ============================ */
const loginUser = document.getElementById('loginUser');
const loginPass = document.getElementById('loginPass');
const btnLogin = document.getElementById('btnLogin');
const loginMsg = document.getElementById('loginMsg');

const adminCard = document.getElementById('adminCard');
const loginCard = document.getElementById('loginCard');
const studentCard = document.getElementById('studentCard');

const subjectInput = document.getElementById('subjectInput');
const btnAddSubject = document.getElementById('btnAddSubject');
const subjectList = document.getElementById('subjectList');
const qSubjectSelect = document.getElementById('qSubjectSelect');

const btnAddQuestion = document.getElementById('btnAddQuestion');
const qText = document.getElementById('qText'), optA = document.getElementById('optA'), optB = document.getElementById('optB'), optC = document.getElementById('optC'), optD = document.getElementById('optD'), qCorrect = document.getElementById('qCorrect');
const questionsTbody = document.getElementById('questionsTbody');

const studentFormBtn = document.getElementById('btnAddStudent');
const stuId = document.getElementById('stuId'), stuName = document.getElementById('stuName'), stuPass = document.getElementById('stuPass');
const studentsTbody = document.getElementById('studentsTbody');

const resultsTbody = document.getElementById('resultsTbody'), btnExportResults = document.getElementById('btnExportResults');
const filterStudent = document.getElementById('filterStudent'), filterSubject = document.getElementById('filterSubject'), btnApplyFilter = document.getElementById('btnApplyFilter'), btnClearFilter = document.getElementById('btnClearFilter');

const studentSubjectSelect = document.getElementById('studentSubjectSelect'), btnStartExam = document.getElementById('btnStartExam'), examCard = document.getElementById('examCard'), examForm = document.getElementById('examForm'), examTitle = document.getElementById('examTitle'), examTimer = document.getElementById('examTimer'), btnSubmitExam = document.getElementById('btnSubmitExam'), btnCancelExam = document.getElementById('btnCancelExam');
const studentWelcome = document.getElementById('studentWelcome');
const btnLogoutAdmin = document.getElementById('btnLogoutAdmin'), btnLogoutStudent = document.getElementById('btnLogoutStudent');
const btnRefresh = document.getElementById('btnRefresh');
const status = document.getElementById('status');

/* ============================
   UTILITIES
   ============================ */
function showStatus(text){ status.textContent = text || ""; }
function safeJSON(obj){ try{return JSON.parse(JSON.stringify(obj)); }catch(e){return obj;} }

/* ============================
   JSONBin: load / save
   ============================ */
async function loadFromBin(){
  if(!BIN_ID || !API_KEY){ showStatus("No Bin ID/API key set — running local-only mode."); return; }
  showStatus("Loading data from JSONBin...");
  try{
    const res = await fetch(BIN_URL + '/latest', { headers: { "X-Master-Key": API_KEY } });
    if(!res.ok){ showStatus("Bin load failed ("+res.status+"). Using local sample data."); return; }
    const j = await res.json();
    if(j.record) { state = j.record; showStatus("Loaded data from JSONBin."); }
    else showStatus("Bin empty — using local data.");
  }catch(err){
    console.error(err);
    showStatus("Error loading bin — running local-only. ("+err.message+")");
  }
}
async function saveToBin(){
  if(!BIN_ID || !API_KEY){ showStatus("Not saving to bin (no BIN_ID/API_KEY)."); return; }
  showStatus("Saving to JSONBin...");
  try{
    const res = await fetch(BIN_URL, {
      method:'PUT',
      headers:{ "Content-Type":"application/json", "X-Master-Key": API_KEY },
      body: JSON.stringify(state)
    });
    if(!res.ok) { showStatus("Save failed: "+res.status); return; }
    showStatus("Saved to JSONBin.");
  }catch(err){
    console.error(err);
    showStatus("Save error: "+err.message);
  }
}

/* ============================
   INITIALIZE (attempt load)
   ============================ */
(async function init(){
  await loadFromBin();           // try bin first (falls back to local state)
  renderAllAdminLists();
  bindAllEventListeners();
  showLoginFocus();
})();

/* ============================
   EVENTS binding
   ============================ */
function bindAllEventListeners(){
  btnLogin.addEventListener('click', handleLogin);
  btnAddSubject.addEventListener('click', handleAddSubject);
  btnAddQuestion.addEventListener('click', handleAddQuestion);
  studentFormBtn.addEventListener('click', handleAddStudent);
  btnRefresh.addEventListener('click', async()=>{ await loadFromBin(); renderAllAdminLists(); });
  btnLogoutAdmin.addEventListener('click', logout);
  btnLogoutStudent && btnLogoutStudent.addEventListener('click', logout);
  btnApplyFilter.addEventListener('click', applyResultsFilter);
  btnClearFilter.addEventListener('click', ()=>{
    filterStudent.value=''; filterSubject.value=''; renderResults();
  });
  btnExportResults.addEventListener('click', exportResultsCSV);
  btnStartExam && btnStartExam.addEventListener('click', handleStartExam);
  btnSubmitExam && btnSubmitExam.addEventListener('click', handleSubmitExam);
  btnCancelExam && btnCancelExam.addEventListener('click', ()=>{ cancelExam(); });
}

/* ============================
   LOGIN HANDLERS
   ============================ */
function showLoginFocus(){ loginUser.focus(); }
function handleLogin(){
  const username = loginUser.value.trim(); const pass = loginPass.value;
  if(!username || !pass){ loginMsg.textContent = "Enter username and password"; return; }
  // Admin
  if(username.toLowerCase() === 'admin' && pass === state.adminPassword){
    currentUser = { role:'admin', id:'admin', name:'Administrator' };
    loginCard.classList.add('hidden'); adminCard.classList.remove('hidden'); renderAllAdminLists();
    loginMsg.textContent = '';
    return;
  }
  // Student
  const stu = state.students.find(s => (s.id === username || s.name === username) && s.password === pass);
  if(stu){
    currentUser = { role:'student', id:stu.id, name:stu.name };
    loginCard.classList.add('hidden'); studentCard.classList.remove('hidden');
    studentWelcome.textContent = stu.name;
    populateStudentSubjects();
    loginMsg.textContent = '';
    return;
  }
  loginMsg.textContent = 'Invalid login.';
}

/* ============================
   ADMIN - Subjects
   ============================ */
function handleAddSubject(){ const s = subjectInput.value.trim(); if(!s) return alert('Enter subject'); if(state.subjects.includes(s)) return alert('Subject exists'); state.subjects.push(s); state.questions[s]=[]; subjectInput.value=''; renderAllAdminLists(); saveToBin(); }
function renderSubjectsList(){
  subjectList.innerHTML=''; qSubjectSelect.innerHTML='';
  state.subjects.forEach((s,i)=>{
    const li = document.createElement('li');
    li.textContent = s + ' ';
    const editBtn = document.createElement('button'); editBtn.textContent='Edit'; editBtn.className='action-btn';
    editBtn.onclick = ()=>{ const newName = prompt('Rename subject', s); if(newName && newName.trim()){ const name2=newName.trim(); state.subjects[i]=name2; state.questions[name2]=state.questions[s]||[]; if(name2!==s) delete state.questions[s]; renderAllAdminLists(); saveToBin(); } };
    const delBtn = document.createElement('button'); delBtn.textContent='Delete'; delBtn.className='action-btn danger';
    delBtn.onclick = ()=>{ if(confirm('Delete subject and its questions?')){ state.subjects.splice(i,1); delete state.questions[s]; renderAllAdminLists(); saveToBin(); } };
    li.appendChild(editBtn); li.appendChild(delBtn); subjectList.appendChild(li);
    const opt = document.createElement('option'); opt.value = s; opt.textContent = s; qSubjectSelect.appendChild(opt);
  });
}

/* ============================
   ADMIN - Questions
   ============================ */
function handleAddQuestion(){
  const subj = qSubjectSelect.value; const text=qText.value.trim();
  if(!subj) return alert('Select subject');
  if(!text) return alert('Enter question text');
  const a=optA.value.trim(), b=optB.value.trim(), c=optC.value.trim(), d=optD.value.trim();
  const correct = qCorrect.value;
  if(!a||!b||!c||!d) return alert('Enter all options');
  state.questions[subj] = state.questions[subj] || [];
  state.questions[subj].push({ q:text, options:{A:a,B:b,C:c,D:d}, answer:correct });
  qText.value=''; optA.value=''; optB.value=''; optC.value=''; optD.value=''; qCorrect.value='A';
  renderQuestionsFor(subj);
  saveToBin();
}
function renderQuestionsFor(subject){
  questionsTbody.innerHTML='';
  (state.questions[subject]||[]).forEach((qq,idx)=>{
    const tr=document.createElement('tr');
    tr.innerHTML = `<td>${idx+1}</td><td>${qq.q}</td><td>${qq.answer}</td><td></td>`;
    const actionsTd = tr.querySelector('td:last-child');
    const editBtn=document.createElement('button'); editBtn.className='action-btn'; editBtn.textContent='Edit';
    editBtn.onclick = ()=>{ editQuestion(subject, idx); };
    const delBtn=document.createElement('button'); delBtn.className='action-btn danger'; delBtn.textContent='Delete';
    delBtn.onclick = ()=>{ if(confirm('Delete question?')){ state.questions[subject].splice(idx,1); renderQuestionsFor(subject); saveToBin(); } };
    actionsTd.appendChild(editBtn); actionsTd.appendChild(delBtn);
    questionsTbody.appendChild(tr);
  });
}
function editQuestion(subject, index){
  const q = state.questions[subject][index];
  const newQ = prompt('Edit question text', q.q);
  if(!newQ) return;
  const newA = prompt('Option A', q.options.A); if(newA) q.options.A=newA;
  const newB = prompt('Option B', q.options.B); if(newB) q.options.B=newB;
  const newC = prompt('Option C', q.options.C); if(newC) q.options.C=newC;
  const newD = prompt('Option D', q.options.D); if(newD) q.options.D=newD;
  const newAns = prompt('Correct answer (A/B/C/D)', q.answer); if(newAns) q.answer=newAns.toUpperCase();
  q.q = newQ;
  saveToBin();
  renderQuestionsFor(subject);
}

/* ============================
   ADMIN - Students
   ============================ */
function handleAddStudent(){
  const id = stuId.value.trim(), name = stuName.value.trim(), pass = stuPass.value.trim();
  if(!id || !name || !pass) return alert('Fill ID, name and password');
  if(state.students.some(s=>s.id===id)) return alert('Student ID exists');
  state.students.push({ id,name,password:pass });
  stuId.value=''; stuName.value=''; stuPass.value='';
  renderStudentsTable();
  saveToBin();
}
function renderStudentsTable(){
  studentsTbody.innerHTML='';
  state.students.forEach((s,i)=>{
    const tr=document.createElement('tr');
    tr.innerHTML = `<td>${s.id}</td><td>${s.name}</td><td>${s.password}</td><td></td>`;
    const tdActions = tr.querySelector('td:last-child');
    const editBtn=document.createElement('button'); editBtn.className='action-btn'; editBtn.textContent='Edit';
    editBtn.onclick = ()=>{ const newName = prompt('Edit name', s.name); const newPass = prompt('Edit password', s.password); if(newName) s.name=newName; if(newPass) s.password=newPass; renderStudentsTable(); saveToBin(); };
    const delBtn=document.createElement('button'); delBtn.className='action-btn danger'; delBtn.textContent='Delete';
    delBtn.onclick = ()=>{ if(confirm('Delete student?')){ state.students.splice(i,1); renderStudentsTable(); saveToBin(); } };
    tdActions.appendChild(editBtn); tdActions.appendChild(delBtn);
    studentsTbody.appendChild(tr);
  });
}

/* ============================
   ADMIN - Results
   ============================ */
function renderResults(filter){
  resultsTbody.innerHTML='';
  const rows = state.results.filter(r=>{
    if(filter?.student && filter.student.trim() && !( (r.studentId||'').toLowerCase().includes(filter.student.toLowerCase()) || (r.studentName||'').toLowerCase().includes(filter.student.toLowerCase()))) return false;
    if(filter?.subject && filter.subject.trim() && !(r.subject||'').toLowerCase().includes(filter.subject.toLowerCase())) return false;
    return true;
  });
  rows.forEach((r,i)=>{
    const tr=document.createElement('tr');
    tr.innerHTML = `<td>${r.studentId||''}</td><td>${r.studentName||''}</td><td>${r.subject||''}</td><td>${r.score}/${r.total}</td><td>${r.date||''}</td><td></td>`;
    const tdActions = tr.querySelector('td:last-child');
    const delBtn = document.createElement('button'); delBtn.className='action-btn danger'; delBtn.textContent='Delete';
    delBtn.onclick = ()=>{ if(confirm('Delete this result?')){ state.results.splice(i,1); saveToBin(); renderResults(); } };
    tdActions.appendChild(delBtn);
    resultsTbody.appendChild(tr);
  });
}
function applyResultsFilter(){ renderResults({ student:filterStudent.value, subject:filterSubject.value }); }
function exportResultsCSV(){
  if(!state.results.length) return alert('No results to export');
  let csv = 'studentId,studentName,subject,score,total,date\n';
  state.results.forEach(r => { csv += `${r.studentId||''},${(r.studentName||'')},${r.subject||''},${r.score||''},${r.total||''},${r.date||''}\n`; });
  const blob = new Blob([csv],{type:'text/csv'}); const url = URL.createObjectURL(blob); const a = document.createElement('a');
  a.href=url; a.download='results.csv'; document.body.appendChild(a); a.click(); document.body.removeChild(a);
}

/* ============================
   STUDENT - Exam flow
   ============================ */
function populateStudentSubjects(){
  studentSubjectSelect.innerHTML='';
  state.subjects.forEach(s=>{ const opt=document.createElement('option'); opt.value=s; opt.textContent=s; studentSubjectSelect.appendChild(opt); });
}
function handleStartExam(){
  const subj = studentSubjectSelect.value;
  startExam(subj);
}
function startExam(subject){
  // prepare exam
  exam.subject = subject;
  exam.questions = JSON.parse(JSON.stringify(state.questions[subject] || [])); // deep copy
  if(!exam.questions.length){ return alert('No questions for this subject'); }
  // show exam UI
  examTitle.textContent = subject + ' — Exam';
  examForm.innerHTML = '';
  exam.questions.forEach((q, idx)=>{
    const div = document.createElement('div'); div.className='question';
    div.innerHTML = `<p><strong>Q${idx+1}.</strong> ${q.q}</p>
      <label><input type="radio" name="q${idx}" value="A"> A) ${q.options.A}</label><br>
      <label><input type="radio" name="q${idx}" value="B"> B) ${q.options.B}</label><br>
      <label><input type="radio" name="q${idx}" value="C"> C) ${q.options.C}</label><br>
      <label><input type="radio" name="q${idx}" value="D"> D) ${q.options.D}</label><br>`;
    examForm.appendChild(div);
  });
  // timer
  exam.timeLeft = exam.duration; // seconds
  examTimer && clearInterval(exam.timer);
  exam.timer = setInterval(()=>{ exam.timeLeft--; examTimer.textContent = formatTime(exam.timeLeft); if(exam.timeLeft<=0){ clearInterval(exam.timer); finalizeExam(); } }, 1000);
  // UI show
  examCard.classList.remove('hidden');
  studentCard.classList.add('hidden');
}
function formatTime(sec){ const m=Math.floor(sec/60), s=sec%60; return `${m}:${s.toString().padStart(2,'0')}`; }
function handleSubmitExam(){ if(confirm('Submit exam now?')) finalizeExam(); }
function finalizeExam(){
  // compute score
  clearInterval(exam.timer);
  const subj = exam.subject;
  let correctCount=0;
  exam.questions.forEach((q, idx)=>{
    const sel = document.querySelector(`input[name="q${idx}"]:checked`);
    if(sel && sel.value === q.answer) correctCount++;
  });
  // save result (student cannot see numeric score)
  state.results.push({
    studentId: currentUser.id || '',
    studentName: currentUser.name || '',
    subject: subj,
    score: correctCount,
    total: exam.questions.length,
    date: (new Date()).toLocaleString()
  });
  saveToBin();
  alert('Exam submitted. Your result is recorded and visible to admin only.');
  // hide exam UI
  examCard.classList.add('hidden');
  studentCard.classList.remove('hidden');
  populateStudentSubjects();
  updateAfterResult();
}
function cancelExam(){ if(confirm('Cancel this exam?')){ clearInterval(exam.timer); examCard.classList.add('hidden'); studentCard.classList.remove('hidden'); } }

/* ============================
   Helpers to update UI
   ============================ */
function renderAllAdminLists(){
  renderSubjectsList();
  renderStudentsTable();
  renderQuestionsFor(state.subjects[0]||'');
  renderResults();
  populateStudentSubjects();
}
function renderAllAdminListsWrapper(){ renderAllAdminLists(); showStatus('Ready'); }

/* ============================
   Called after save / load
   ============================ */
function updateAfterResult(){
  renderResults();
  renderStudentsTable();
  renderQuestionsFor(qSubjectSelect.value || state.subjects[0] || '');
}

/* ============================
   Logout
   ============================ */
function logout(){
  currentUser = null;
  // hide all role-specific cards
  adminCard.classList.add('hidden'); studentCard.classList.add('hidden'); examCard.classList.add('hidden');
  loginCard.classList.remove('hidden');
  loginUser.value=''; loginPass.value='';
  showStatus('');
}

/* ============================
   Convenience: expose some actions to DOM elements
   ============================ */
document.getElementById('qSubjectSelect').addEventListener('change', (e)=>{ renderQuestionsFor(e.target.value); });

/* END OF SCRIPT */
</script>
</body>
</html>
